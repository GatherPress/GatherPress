(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.domReady;var n=e.n(t);const i=window.wp.data,a=window.moment;var r=e.n(a);const s=window.wp.i18n;function d(e){if("object"==typeof GatherPress)return e.split(".").reduce(((e,t)=>e&&e[t]),GatherPress)}function o(e,t){if("object"!=typeof GatherPress)return;const n=e.split("."),i=n.pop();n.reduce(((e,t)=>{var n;return null!==(n=e[t])&&void 0!==n?n:e[t]={}}),GatherPress)[i]=t}window.wp.element,window.wp.date,window.ReactJSXRuntime;const m="YYYY-MM-DDTHH:mm:ss",c=r().tz(p()).add(1,"day").set("hour",18).set("minute",0).set("second",0).format(m),T=r().tz(c,p()).add(2,"hours").format(m);function p(e=d("eventDetails.dateTime.timezone")){return r().tz.zone(e)?e:(0,s.__)("GMT","gatherpress")}const l=window.wp.blocks,u={dateTimeStart:d("eventDetails.dateTime.datetime_start")?d("eventDetails.dateTime.datetime_start"):c,dateTimeEnd:d("eventDetails.dateTime.datetime_end")?d("eventDetails.dateTime.datetime_end"):T,timezone:d("eventDetails.dateTime.timezone")},E={setDateTimeStart:e=>(o("eventDetails.dateTime.datetime_start",e),{type:"SET_DATETIME_START",dateTimeStart:e}),setDateTimeEnd:e=>(o("eventDetails.dateTime.datetime_end",e),{type:"SET_DATETIME_END",dateTimeEnd:e}),setTimezone:e=>(o("eventDetails.dateTime.timezone",e),{type:"SET_TIMEZONE",timezone:e})},g=(0,i.createReduxStore)("gatherpress/datetime",{reducer:(e=u,t)=>{switch(t.type){case"SET_DATETIME_START":return{...e,dateTimeStart:t.dateTimeStart};case"SET_DATETIME_END":return{...e,dateTimeEnd:t.dateTimeEnd};case"SET_TIMEZONE":return{...e,timezone:t.timezone};default:return e}},actions:E,selectors:{getDateTimeStart:e=>e.dateTimeStart,getDateTimeEnd:e=>e.dateTimeEnd,getTimezone:e=>e.timezone}});(0,i.register)(g),n()((()=>{const e=(0,i.select)("core/edit-post");if(!e)return;const t=(0,i.dispatch)("core/edit-post");e.isEditorSidebarOpened()?(t.openGeneralSidebar("edit-post/document"),t.toggleEditorPanelOpened("gatherpress-event-settings/gatherpress-event-settings")):(t.openGeneralSidebar(),t.toggleEditorPanelOpened("gatherpress-event-settings/gatherpress-event-settings")),function(){const e="gatherpress_event_past",t=(0,i.dispatch)("core/notices");t.removeNotice(e),function(){const e=r().tz(d("eventDetails.dateTime.datetime_end"),p());return"gatherpress_event"===(0,i.select)("core/editor")?.getCurrentPostType()&&r().tz(p()).valueOf()>e.valueOf()}()&&t.createNotice("warning",(0,s.__)("This event has already passed.","gatherpress"),{id:e,isDismissible:!1})}()})),n()((()=>{Object.keys(d("misc.unregisterBlocks")).forEach((e=>{const t=d("misc.unregisterBlocks")[e];t&&void 0!==(0,l.getBlockType)(t)&&(0,l.unregisterBlockType)(t)}))}))})();