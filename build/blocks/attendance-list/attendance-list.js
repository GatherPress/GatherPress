!function(){"use strict";var e={n:function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,{a:a}),a},d:function(t,a){for(var s in a)e.o(a,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:a[s]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,a=window.wp.domReady,s=e.n(a),n=window.wp.i18n,r=window.React,l=e=>{let{item:a,additionalClasses:s,count:n,onTitleClick:r}=e;const{title:l,value:i}=a,c=0===n&&"attending"!==i?"hidden":"active";return(0,t.createElement)("div",{className:`gatherpress-attendance-list__navigation--item gatherpress-attendance-list__${c} ${s}`},(0,t.createElement)("a",{className:"gatherpress-attendance-list__anchor","data-item":i,"data-toggle":"tab",href:"#",role:"tab","aria-controls":`#gatherpress-attendance-${i}`,onClick:e=>r(e,i)},l),(0,t.createElement)("span",{className:"gatherpress-attendance-list__count"},"(",n,")"))};const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const[a,s]of Object.entries(e)){let e=a;t&&(e+=t),addEventListener(e,(e=>{s(e.detail)}),!1)}};var c=e=>{let{items:a,activeValue:s,onTitleClick:n}=e;const c={all:0,attending:0,not_attending:0,waiting_list:0};if("object"==typeof GatherPress)for(const[e,t]of Object.entries(GatherPress.attendees))c[e]=t.count;const[o,d]=(0,r.useState)(c);i({setAttendanceCount:d},GatherPress.post_id);const m=a.map(((e,a)=>{const r=e.value===s?"gatherpress-attendance-list__navigation--current":"";return(0,t.createElement)(l,{key:a,item:e,count:o[e.value],additionalClasses:r,onTitleClick:n})}));return(0,t.createElement)("nav",{className:"gatherpress-attendance-list__navigation"},m)},o=e=>{let{eventId:a,value:s,limit:r,attendees:l=[],avatarOnly:c=!1}=e;const[o,d]=(0,t.useState)(l);i({setAttendanceList:d},a);let m="";return"object"==typeof o&&void 0!==o[s]&&(l=[...o[s].attendees],r&&(l=l.splice(0,r)),m=l.map(((e,a)=>{const{profile:s,name:n,photo:r,role:l}=e;let{guests:i}=e;return i=i?" +"+i+" guest(s)":"",(0,t.createElement)("div",{key:a,className:"gatherpress-attendance-list__items--item"},(0,t.createElement)("figure",{className:"gatherpress-attendance-list__member-avatar"},(0,t.createElement)("a",{href:s},(0,t.createElement)("img",{alt:n,title:n,src:r}))),!1===c&&(0,t.createElement)("div",{className:"gatherpress-attendance-list__member-info"},(0,t.createElement)("div",{className:"gatherpress-attendance-list__member-name"},(0,t.createElement)("a",{href:s},n)),(0,t.createElement)("div",{className:"gatherpress-attendance-list__member-role"},l),(0,t.createElement)("small",{className:"gatherpress-attendance-list__guests"},i)))}))),(0,t.createElement)(t.Fragment,null,"attending"===s&&0===m.length&&!1===c&&(0,t.createElement)("div",{className:"gatherpress-attendance-list__no-attendees"},"1"!==GatherPress.has_event_past?(0,n.__)("No one is attending this event yet.","gatherpress"):(0,n.__)("No one went to this event.","gatherpress")),m)},d=e=>{let{items:a,activeValue:s,limit:n=!1}=e;const r=a.map(((e,a)=>{const{value:r}=e,l=r===s?"active":"hidden",i=GatherPress.post_id,c=GatherPress.attendees;return(0,t.createElement)("div",{key:a,className:`gatherpress-attendance-list__items gatherpress-attendance-list__${l}`,id:`gatherpress-attendance-${r}`,role:"tabpanel","aria-labelledby":`gatherpress-attendance-${r}-tab`},(0,t.createElement)(o,{eventId:i,value:r,limit:n,attendees:c}))}));return(0,t.createElement)("div",{className:"gatherpress-attendance-list__container"},r)},m=()=>{let e="attending";const a=[{title:"1"!==GatherPress.has_event_past?(0,n.__)("Attending","gatherpress"):(0,n.__)("Went","gatherpress"),value:"attending"},{title:"1"!==GatherPress.has_event_past?(0,n.__)("Waiting List","gatherpress"):(0,n.__)("Wait Listed","gatherpress"),value:"waiting_list"},{title:"1"!==GatherPress.has_event_past?(0,n.__)("Not Attending","gatherpress"):(0,n.__)("Didn't Go","gatherpress"),value:"not_attending"}];"object"==typeof GatherPress&&(e=void 0!==GatherPress.current_user.status&&"attend"!==GatherPress.current_user.status?GatherPress.current_user.status:e);const[s,r]=(0,t.useState)(e),[l,o]=(0,t.useState)(10);let m;return i({setAttendanceStatus:r},GatherPress.post_id),m=!1===l?(0,n.__)("See less","gatherpress"):(0,n.__)("See more","gatherpress"),(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"gatherpress-attendance-list"},(0,t.createElement)(c,{items:a,activeValue:s,onTitleClick:(e,t)=>{e.preventDefault(),r(t)}}),(0,t.createElement)(d,{items:a,activeValue:s,limit:l})),(0,t.createElement)("div",{className:"has-text-align-right"},(0,t.createElement)("a",{href:"#",onClick:e=>(e=>{e.preventDefault(),o(!1===l&&10)})(e)},m)))};const _=()=>(GatherPress.post_id,GatherPress.current_user,(0,t.createElement)("div",{className:"react-place-code"},(0,t.createElement)(m,null)));s()((function(){const e=document.querySelector(".replace-attendance-list");(0,t.render)((0,t.createElement)(_,null),e)}))}();