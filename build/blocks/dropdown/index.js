(()=>{"use strict";const e=window.wp.blocks,o=JSON.parse('{"UU":"gatherpress/dropdown","DD":"Dropdown","L1":"gatherpress","Kk":"menu","uK":{"dropdownId":{"type":"string"},"openOn":{"type":"string","default":"click","enum":["click","hover"]},"label":{"type":"string","default":"Dropdown"},"replaceLabel":{"type":"boolean","default":false},"alignment":{"type":"string","default":"left","enum":["left","center","right","justify","stretch"]},"padding":{"type":"object","default":{"top":0,"right":0,"bottom":0,"left":0}}}}'),t=window.wp.blockEditor,r=window.wp.components,n=window.wp.i18n,l=window.wp.element,d={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let s;const a=new Uint8Array(16);function p(){if(!s&&(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(a)}const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));const c=function(e,o,t){if(d.randomUUID&&!o&&!e)return d.randomUUID();const r=(e=e||{}).random||(e.rng||p)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,o){t=t||0;for(let e=0;e<16;++e)o[t+e]=r[e];return o}return function(e,o=0){return i[e[o+0]]+i[e[o+1]]+i[e[o+2]]+i[e[o+3]]+"-"+i[e[o+4]]+i[e[o+5]]+"-"+i[e[o+6]]+i[e[o+7]]+"-"+i[e[o+8]]+i[e[o+9]]+"-"+i[e[o+10]]+i[e[o+11]]+i[e[o+12]]+i[e[o+13]]+i[e[o+14]]+i[e[o+15]]}(r)},g=window.ReactJSXRuntime;(0,e.registerBlockType)(o.UU,{title:o.DD,category:o.L1,icon:o.Kk,attributes:o.uK,edit:({attributes:e,setAttributes:o})=>{const d=(0,t.useBlockProps)(),[s,a]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{e.dropdownId||o({dropdownId:`dropdown-${c()}`})}),[]),(0,l.useEffect)((()=>{const o=document.getElementById(e.dropdownId);o&&(o.style.display=s?"block":"none")}),[s]),(0,l.useEffect)((()=>{const e=e=>{"Escape"===e.key&&s&&a(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[s]),(0,l.useEffect)((()=>{wp.data.dispatch("core/block-editor").updateBlockAttributes(e.dropdownId,{metadata:{...e.metadata,name:e.label||(0,n.__)("Dropdown","gatherpress")}})}),[e.label]),(0,g.jsxs)("div",{...d,children:[(0,g.jsxs)(t.InspectorControls,{children:[(0,g.jsxs)(r.PanelBody,{title:(0,n.__)("Label Settings","gatherpress"),initialOpen:!0,children:[(0,g.jsx)("p",{children:(0,n.__)('The dropdown label behaves like a button if the link is empty or set to "#".',"gatherpress")}),(0,g.jsx)(t.PanelColorSettings,{title:(0,n.__)("Label Colors","gatherpress"),initialOpen:!0,colorSettings:[{value:e.labelColor,onChange:e=>o({labelColor:e}),label:(0,n.__)("Label Color","gatherpress"),help:(0,n.__)("Choose a color for the dropdown label.","gatherpress")}]})]}),(0,g.jsxs)(r.PanelBody,{title:(0,n.__)("Dropdown Settings","gatherpress"),initialOpen:!1,children:[(0,g.jsx)(t.PanelColorSettings,{title:(0,n.__)("Dropdown Colors","gatherpress"),initialOpen:!0,colorSettings:[{value:e.dropdownBgColor,onChange:e=>o({dropdownBgColor:e}),label:(0,n.__)("Dropdown Background Color","gatherpress"),help:(0,n.__)("Choose a background color for the dropdown items.","gatherpress")}]}),(0,g.jsx)(r.BoxControl,{label:(0,n.__)("Padding","gatherpress"),values:e.padding,onChange:e=>o({padding:e})})]})]}),(0,g.jsx)(t.BlockControls,{children:(0,g.jsx)(r.ToolbarGroup,{children:(0,g.jsx)(r.ToolbarButton,{icon:s?"no-alt":"plus",onClick:()=>{a((e=>!e))},label:s?(0,n.__)("Close Dropdown","gatherpress"):(0,n.__)("Open Dropdown","gatherpress"),title:s?(0,n.__)("Close Dropdown","gatherpress"):(0,n.__)("Open Dropdown","gatherpress"),"aria-label":s?(0,n.__)("Close Dropdown","gatherpress"):(0,n.__)("Open Dropdown","gatherpress")})})}),(0,g.jsx)(t.RichText,{tagName:"a",href:"#",role:"button","aria-expanded":s,"aria-controls":e.dropdownId,tabIndex:0,value:e.label,onChange:e=>o({label:e}),placeholder:(0,n.__)("Dropdown Label...","gatherpress"),style:{color:e.labelColor},onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()}}),(0,g.jsx)("div",{id:e.dropdownId,role:"region",style:{display:s?"block":"none",backgroundColor:e.dropdownBgColor,padding:e.padding?`${e.padding.top||0}px ${e.padding.right||0}px ${e.padding.bottom||0}px ${e.padding.left||0}px`:void 0},children:(0,g.jsx)(t.InnerBlocks,{allowedBlocks:["gatherpress/dropdown-item"]})})]})},save:({attributes:e,clientId:o})=>{const r=t.useBlockProps.save(),n=`dropdown-${o}`;return(0,g.jsxs)("div",{...r,children:[(0,g.jsx)("a",{href:"#",role:"button","aria-expanded":"false","aria-controls":n,tabIndex:0,style:{color:e.labelColor},children:e.label}),(0,g.jsx)("div",{id:n,role:"region",style:{backgroundColor:e.dropdownBgColor},children:(0,g.jsx)(t.InnerBlocks.Content,{})})]})}})})();