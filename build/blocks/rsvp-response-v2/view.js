import*as t from"@wordpress/interactivity";var e={d:(t,s)=>{for(var r in s)e.o(s,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:s[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),e.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);const s=(r={getContext:()=>t.getContext,getElement:()=>t.getElement,store:()=>t.store},n={},e.d(n,r),n);var r,n;function o(t,e){t.posts[e]||(t.posts[e]={eventResponses:{attending:0,waitingList:0,notAttending:0},currentUser:{status:"no_status",guests:0,anonymous:0},rsvpSelection:"attending"})}const{state:a,actions:i}=(0,s.store)("gatherpress",{state:{posts:{}},actions:{processRsvpSelection(t){i.linkHandler(t);const e=(0,s.getElement)();if(e&&e.ref){const t=e.ref.getAttribute("data-status");if(t){const e=(0,s.getContext)(),r=e?.postId||0;o(a,r),r&&(a.posts[r].rsvpSelection=t)}}}},callbacks:{processRsvpDropdown(){const t=(0,s.getContext)(),e=t?.postId||0;o(a,e);const r=(0,s.getElement)();if(r&&r.ref&&!r.ref.hasAttribute("data-label")){const t=r.ref.textContent.trim();t&&r.ref.setAttribute("data-label",t)}const n=r.ref.parentElement,i=n?.classList||[],p=r.ref.getAttribute("data-label"),l=r.ref.getAttribute("data-status")===a.posts[e].rsvpSelection||"attending"===r.ref.getAttribute("data-status")&&"no_status"===a.posts[e].rsvpSelection,c=r.ref.closest(".wp-block-gatherpress-dropdown"),d=c.querySelector(".wp-block-gatherpress-dropdown__trigger");let g=0;if(i.contains("gatherpress--rsvp-attending")?g=a.posts[e]?.eventResponses?.attending||0:i.contains("gatherpress--rsvp-waiting-list")?g=a.posts[e]?.eventResponses?.waitingList||0:i.contains("gatherpress--rsvp-not-attending")&&(g=a.posts[e]?.eventResponses?.notAttending||0),p){const t=p.replace("%d",g);r.ref.textContent=t}if(l){const t=r.ref.textContent.trim();c.querySelectorAll("[data-status]").forEach((t=>{t.classList.remove("gatherpress--is-disabled"),t.removeAttribute("tabindex"),t.removeAttribute("aria-disabled")})),r.ref.classList.add("gatherpress--is-disabled"),r.ref.setAttribute("tabindex","-1"),r.ref.setAttribute("aira-disabled","true"),d.textContent=t}0!==g||i.contains("gatherpress--rsvp-attending")?n.classList.remove("gatherpress--is-not-visible"):n.classList.add("gatherpress--is-not-visible");const b=c.querySelectorAll(".wp-block-gatherpress-dropdown-item:not(.gatherpress--is-not-visible)");1===b.length&&b[0].classList.contains("gatherpress--rsvp-attending")?(d.classList.add("gatherpress--is-disabled"),d.setAttribute("tabindex","-1")):(d.classList.remove("gatherpress--is-disabled"),d.setAttribute("tabindex","0"))}}});