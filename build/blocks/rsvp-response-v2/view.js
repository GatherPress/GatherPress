import*as t from"@wordpress/interactivity";var e={d:(t,s)=>{for(var n in s)e.o(s,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:s[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const s=(n={getContext:()=>t.getContext,getElement:()=>t.getElement,store:()=>t.store},r={},e.d(r,n),r);var n,r;function o(t,e){const s=function(){if("object"==typeof GatherPress)return"eventDetails".split(".").reduce(((t,e)=>t&&t[e]),GatherPress)}();t.posts[e]||(t.posts[e]={eventResponses:{attending:s.responses.attending.count||0,waitingList:s.responses.waiting_list.count||0,notAttending:s.responses.not_attending.count||0},currentUser:{status:s.currentUser?.status||"no_status",guests:s.currentUser?.guests||0,anonymous:s.currentUser?.anonymous||0},rsvpSelection:"attending"})}const{state:a,actions:i}=(0,s.store)("gatherpress",{state:{posts:{}},actions:{processRsvpSelection(t){i.linkHandler(t);const e=(0,s.getElement)();if(e&&e.ref){const t=e.ref.getAttribute("data-status");if(t){const e=(0,s.getContext)(),n=e?.postId||0;o(a,n),n&&(a.posts[n].rsvpSelection=t)}}}},callbacks:{processRsvpDropdown(){const t=(0,s.getContext)(),e=t?.postId||0;o(a,e);const n=(0,s.getElement)();if(n&&n.ref&&!n.ref.hasAttribute("data-label")){const t=n.ref.textContent.trim();t&&n.ref.setAttribute("data-label",t)}const r=n.ref.parentElement,i=r?.classList||[],p=n.ref.getAttribute("data-label"),c=n.ref.getAttribute("data-status")===a.posts[e].rsvpSelection,l=n.ref.closest(".wp-block-gatherpress-dropdown"),g=l.querySelector(".wp-block-gatherpress-dropdown__trigger");let d=0;if(i.contains("gatherpress--rsvp-attending")?d=a.posts[e]?.eventResponses?.attending||0:i.contains("gatherpress--rsvp-waiting-list")?d=a.posts[e]?.eventResponses?.waitingList||0:i.contains("gatherpress--rsvp-not-attending")&&(d=a.posts[e]?.eventResponses?.notAttending||0),p){const t=p.replace("%d",d);n.ref.textContent=t}if(c){const t=n.ref.textContent.trim();l.querySelectorAll("[data-status]").forEach((t=>{t.classList.remove("gatherpress--is-disabled")})),n.ref.classList.add("gatherpress--is-disabled"),g.textContent=t}0!==d||i.contains("gatherpress--rsvp-attending")?r.classList.remove("gatherpress--is-not-visible"):r.classList.add("gatherpress--is-not-visible");const u=l.querySelectorAll(".wp-block-gatherpress-dropdown-item:not(.gatherpress--is-not-visible)");1===u.length&&u[0].classList.contains("gatherpress--rsvp-attending")?g.classList.add("gatherpress--is-disabled"):g.classList.remove("gatherpress--is-disabled")}}});