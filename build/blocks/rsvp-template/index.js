(()=>{"use strict";const e=window.wp.blocks,s=window.wp.blockEditor,t=(window.wp.i18n,window.wp.data),o=window.wp.element,n=window.ReactJSXRuntime,c=[["core/group",{},[["core/avatar"],["core/comment-author-name"]]]],r=({response:e,blocks:t,blockProps:o,activeRsvpId:r,setActiveRsvpId:l})=>{const{children:i,...p}=(0,s.useInnerBlocksProps)({},{template:c});return(0,n.jsxs)("div",{...p,children:[e.commentId===r?i:null,(0,n.jsx)(d,{blocks:t,commentId:e.commentId,setActiveRsvpId:l,isHidden:e.commentId===r})]})},d=(0,o.memo)((({blocks:e,commentId:t,setActiveRsvpId:o,isHidden:c})=>{const r=(0,s.__experimentalUseBlockPreview)({blocks:e}),d=()=>{o(t)},l={display:c?"none":void 0};return(0,n.jsx)("div",{...r,tabIndex:0,role:"button",style:l,onClick:d,onKeyPress:d})})),l=({responses:e,blocks:t,blockProps:o,activeRsvpId:c,setActiveRsvpId:d})=>(0,n.jsx)(n.Fragment,{children:e&&e.map((({commentId:e,...l},i)=>{const p=parseInt(e,10);return(0,n.jsx)(s.BlockContextProvider,{value:{commentId:p<0?null:p},children:(0,n.jsx)(r,{response:{commentId:p,...l},blockProps:o,blocks:t,activeRsvpId:c,setActiveRsvpId:d})},p||i)}))});(0,e.registerBlockType)("gatherpress/rsvp-template",{edit:({clientId:e,context:{postId:c}})=>{var r;const d=(0,s.useBlockProps)(),i=function(){if("object"==typeof GatherPress)return"eventDetails.responses".split(".").reduce(((e,s)=>e&&e[s]),GatherPress)}(),[p,v]=(0,o.useState)(null!==(r=parseInt(i.attending.responses[0]?.commentId,10))&&void 0!==r?r:null),{blocks:a}=(0,t.useSelect)((t=>{const{getBlocks:o}=t(s.store);return{blocks:o(e)}}),[e]);return(0,n.jsx)(l,{responses:i.attending.responses,blockProps:d,blocks:a,activeRsvpId:p,setActiveRsvpId:v})},save:()=>(0,n.jsx)(s.InnerBlocks.Content,{})})})();