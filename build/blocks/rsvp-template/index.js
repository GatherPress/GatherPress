(()=>{"use strict";const e=window.wp.blocks,s=window.wp.blockEditor,t=(window.wp.i18n,window.wp.data),o=window.wp.element,n=window.ReactJSXRuntime,c=[["core/group",{},[["core/avatar"],["core/comment-author-name"]]]],r=({response:e,blocks:t,blockProps:o,activeRsvpId:r,setActiveRsvpId:i})=>{const{children:l,...p}=(0,s.useInnerBlocksProps)({},{template:c});return(0,n.jsxs)("div",{...p,children:[e.commentId===r?l:null,(0,n.jsx)(d,{blocks:t,commentId:e.commentId,setActiveRsvpId:i,isHidden:e.commentId===r})]})},d=(0,o.memo)((({blocks:e,commentId:t,setActiveRsvpId:o,isHidden:c})=>{const r=(0,s.__experimentalUseBlockPreview)({blocks:e}),d=()=>{o(t)},i={display:c?"none":void 0};return(0,n.jsx)("div",{...r,tabIndex:0,role:"button",style:i,onClick:d,onKeyPress:d})})),i=({responses:e,blocks:t,blockProps:o,activeRsvpId:c,setActiveRsvpId:d})=>(0,n.jsx)(n.Fragment,{children:e&&e.map((({commentId:e,...i},l)=>{const p=parseInt(e,10);return(0,n.jsx)(s.BlockContextProvider,{value:{commentId:p<0?null:p},children:(0,n.jsx)(r,{response:{commentId:p,...i},blockProps:o,blocks:t,activeRsvpId:c,setActiveRsvpId:d})},p||l)}))});(0,e.registerBlockType)("gatherpress/rsvp-template",{edit:({clientId:e,context:{postId:c}})=>{const r=(0,s.useBlockProps)(),[d,l]=(0,o.useState)(),p=function(){if("object"==typeof GatherPress)return"eventDetails.responses".split(".").reduce(((e,s)=>e&&e[s]),GatherPress)}(),{blocks:v}=(0,t.useSelect)((t=>{const{getBlocks:o}=t(s.store);return{blocks:o(e)}}),[e]);return(0,n.jsx)(i,{responses:p.attending.responses,blockProps:r,blocks:v,activeRsvpId:d,setActiveRsvpId:l})},save:()=>(0,n.jsx)(s.InnerBlocks.Content,{})})})();