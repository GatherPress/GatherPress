(()=>{"use strict";var e,s={6572:()=>{const e=window.wp.blocks,s=window.wp.blockEditor,t=window.wp.data,o=window.wp.element,n=[["core/group",{style:{spacing:{blockGap:0}}},[["core/avatar",{isLink:!0,align:"center"}],["core/comment-author-name",{metadata:{name:(0,window.wp.i18n.__)("Display Name","gatherpress")},textAlign:"center",style:{spacing:{margin:{top:"0",bottom:"0"}}},fontSize:"medium"}],["gatherpress/rsvp-guest-count-display",{align:"center",style:{spacing:{margin:{top:"0",bottom:"0"}}},fontSize:"small"}]]]],r=window.ReactJSXRuntime,c=({response:e,blocks:t,activeRsvpId:o,setActiveRsvpId:c,firstRsvpId:i})=>{const{children:p,...a}=(0,s.useInnerBlocksProps)({},{template:n});return(0,r.jsxs)("div",{...a,children:[e.commentId===(o||i)?p:null,(0,r.jsx)(l,{blocks:t,commentId:e.commentId,setActiveRsvpId:c,isHidden:e.commentId===(o||i)})]})},l=(0,o.memo)((({blocks:e,commentId:t,setActiveRsvpId:o,isHidden:n})=>{const c=(0,s.__experimentalUseBlockPreview)({blocks:e}),l=()=>{o(t)},i={display:n?"none":void 0};return(0,r.jsx)("div",{...c,tabIndex:0,role:"button",style:i,onClick:l,onKeyPress:l})})),i=({responses:e,blocks:t,blockProps:o,activeRsvpId:n,setActiveRsvpId:l,firstRsvpId:i})=>(0,r.jsx)(r.Fragment,{children:e&&e.map((({commentId:e,...p},a)=>{const d=parseInt(e,10);return(0,r.jsx)(s.BlockContextProvider,{value:{commentId:d<0?null:d},children:(0,r.jsx)(c,{response:{commentId:d,...p},blockProps:o,blocks:t,activeRsvpId:n,setActiveRsvpId:l,firstRsvpId:i})},d||a)}))});(0,e.registerBlockType)("gatherpress/rsvp-template",{edit:({clientId:e,context:n})=>{var c,l;const p=(0,s.useBlockProps)(),a=null!==(c=n?.["gatherpress/rsvpResponses"])&&void 0!==c?c:null;console.log("Context:",n),console.log("RSVP Responses:",a);const[d,v]=(0,o.useState)(null!==(l=parseInt(a?.attending?.records?.[0]?.commentId,10))&&void 0!==l?l:null),{blocks:m}=(0,t.useSelect)((t=>{const{getBlocks:o}=t(s.store);return{blocks:o(e)}}),[e]);let u=[{commentId:-1}];return a?.attending?.responses?.length&&(u=a.attending.responses),(0,r.jsx)(i,{responses:u,blockProps:p,blocks:m,activeRsvpId:d,setActiveRsvpId:v,firstRsvpId:u[0]?.commentId})},save:()=>(0,r.jsx)(s.InnerBlocks.Content,{})})}},t={};function o(e){var n=t[e];if(void 0!==n)return n.exports;var r=t[e]={exports:{}};return s[e](r,r.exports,o),r.exports}o.m=s,e=[],o.O=(s,t,n,r)=>{if(!t){var c=1/0;for(a=0;a<e.length;a++){for(var[t,n,r]=e[a],l=!0,i=0;i<t.length;i++)(!1&r||c>=r)&&Object.keys(o.O).every((e=>o.O[e](t[i])))?t.splice(i--,1):(l=!1,r<c&&(c=r));if(l){e.splice(a--,1);var p=n();void 0!==p&&(s=p)}}return s}r=r||0;for(var a=e.length;a>0&&e[a-1][2]>r;a--)e[a]=e[a-1];e[a]=[t,n,r]},o.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={2687:0,4967:0};o.O.j=s=>0===e[s];var s=(s,t)=>{var n,r,[c,l,i]=t,p=0;if(c.some((s=>0!==e[s]))){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(i)var a=i(o)}for(s&&s(t);p<c.length;p++)r=c[p],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(a)},t=globalThis.webpackChunkgatherpress=globalThis.webpackChunkgatherpress||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))})();var n=o.O(void 0,[4967],(()=>o(6572)));n=o.O(n)})();