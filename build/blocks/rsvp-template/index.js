(()=>{"use strict";var e,s={6572:()=>{const e=window.wp.blocks,s=window.wp.blockEditor,t=window.wp.data,r=window.wp.element,n=[["core/group",{style:{spacing:{blockGap:0}}},[["core/avatar",{isLink:!0,align:"center"}],["core/comment-author-name",{metadata:{name:(0,window.wp.i18n.__)("Display Name","gatherpress")},textAlign:"center",style:{spacing:{margin:{top:"0",bottom:"0"}}},fontSize:"medium"}],["gatherpress/rsvp-guest-count-display",{align:"center",style:{spacing:{margin:{top:"0",bottom:"0"}}},fontSize:"small"}]]]],o=window.ReactJSXRuntime,i=({response:e,blocks:t,activeRsvpId:r,setActiveRsvpId:i,firstRsvpId:l})=>{const{children:p,...a}=(0,s.useInnerBlocksProps)({},{template:n});return(0,o.jsxs)("div",{...a,children:[e.commentId===(r||l)?p:null,(0,o.jsx)(c,{blocks:t,commentId:e.commentId,setActiveRsvpId:i,isHidden:e.commentId===(r||l)})]})},c=(0,r.memo)((({blocks:e,commentId:t,setActiveRsvpId:r,isHidden:n})=>{const i=(0,s.__experimentalUseBlockPreview)({blocks:e}),c=()=>{r(t)},l={display:n?"none":void 0};return(0,o.jsx)("div",{...i,tabIndex:0,role:"button",style:l,onClick:c,onKeyUp:c})})),l=({responses:e,blocks:t,blockProps:r,activeRsvpId:n,setActiveRsvpId:c,firstRsvpId:l})=>(0,o.jsx)(o.Fragment,{children:e&&e.map((({commentId:e,...p},a)=>{const d=parseInt(e,10);return(0,o.jsx)(s.BlockContextProvider,{value:{commentId:d<0?null:d},children:(0,o.jsx)(i,{response:{commentId:d,...p},blockProps:r,blocks:t,activeRsvpId:n,setActiveRsvpId:c,firstRsvpId:l})},d||a)}))});(0,e.registerBlockType)("gatherpress/rsvp-template",{edit:({clientId:e,context:n})=>{var i,c,p,a;const d=(0,s.useBlockProps)(),v=null!==(i=n?.["gatherpress/rsvpResponses"])&&void 0!==i?i:null,m=null!==(c=n?.["gatherpress/rsvpLimitEnabled"])&&void 0!==c&&c,u=null!==(p=n?.["gatherpress/rsvpLimit"])&&void 0!==p?p:8,[g,I]=(0,r.useState)(null!==(a=parseInt(v?.attending?.records?.[0]?.commentId,10))&&void 0!==a?a:null),{blocks:b}=(0,t.useSelect)((t=>{const{getBlocks:r}=t(s.store);return{blocks:r(e)}}),[e]);let k=[{commentId:-1}];return v?.attending?.records?.length&&(k=v.attending.records,m&&(k=k.slice(0,u))),(0,o.jsx)(l,{responses:k,blockProps:d,blocks:b,activeRsvpId:g,setActiveRsvpId:I,firstRsvpId:k[0]?.commentId})},save:()=>(0,o.jsx)(s.InnerBlocks.Content,{})})}},t={};function r(e){var n=t[e];if(void 0!==n)return n.exports;var o=t[e]={exports:{}};return s[e](o,o.exports,r),o.exports}r.m=s,e=[],r.O=(s,t,n,o)=>{if(!t){var i=1/0;for(a=0;a<e.length;a++){for(var[t,n,o]=e[a],c=!0,l=0;l<t.length;l++)(!1&o||i>=o)&&Object.keys(r.O).every((e=>r.O[e](t[l])))?t.splice(l--,1):(c=!1,o<i&&(i=o));if(c){e.splice(a--,1);var p=n();void 0!==p&&(s=p)}}return s}o=o||0;for(var a=e.length;a>0&&e[a-1][2]>o;a--)e[a]=e[a-1];e[a]=[t,n,o]},r.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={687:0,967:0};r.O.j=s=>0===e[s];var s=(s,t)=>{var n,o,[i,c,l]=t,p=0;if(i.some((s=>0!==e[s]))){for(n in c)r.o(c,n)&&(r.m[n]=c[n]);if(l)var a=l(r)}for(s&&s(t);p<i.length;p++)o=i[p],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(a)},t=globalThis.webpackChunkgatherpress=globalThis.webpackChunkgatherpress||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))})();var n=r.O(void 0,[967],(()=>r(6572)));n=r.O(n)})();