import*as e from"@wordpress/interactivity";var t={d:(e,s)=>{for(var r in s)t.o(s,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:s[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const s=(r={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},n={},t.d(n,r),n);var r,n;function o(e){if("object"==typeof GatherPress)return e.split(".").reduce(((e,t)=>e&&e[t]),GatherPress)}const{state:a}=(0,s.store)("gatherpress",{callbacks:{renderBlocks(){const e=(0,s.getContext)();if(!a.rsvpResponseStatus||e.postId!==a.activePostId)return;const t=(0,s.getElement)();fetch(o("urls.eventApiUrl")+"/rsvp-status-html",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":o("misc.nonce")},body:JSON.stringify({status:a.rsvpResponseStatus,post_id:e.postId,block_data:t.attributes["data-blocks"]})}).then((e=>e.json())).then((e=>{if(e.success){const s=t.ref.parentElement;Array.from(s.children).forEach((e=>{e!==t.ref&&e.hasAttribute("data-id")&&e.remove()}));const r=s.parentElement.querySelector(".gatherpress--empty-rsvp-message");r&&(0===e.responses.attending.count?r.classList.add("gatherpress--is-visible"):r.classList.remove("gatherpress--is-visible")),t.ref.insertAdjacentHTML("beforebegin",function(e){const{body:t}=document.implementation.createHTMLDocument("");t.innerHTML=e;const s=t.getElementsByTagName("*");let r=s.length;for(;r--;){const e=s[r];if("SCRIPT"===e.tagName)e.parentNode&&e.parentNode.removeChild(e);else{let t=e.attributes.length;for(;t--;){const{name:s}=e.attributes[t];s.startsWith("on")&&e.removeAttribute(s)}}}return t.innerHTML}(e.content))}})).catch((()=>{}))}}});