import*as e from"@wordpress/interactivity";var t={d:(e,s)=>{for(var r in s)t.o(s,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:s[r]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const s=(r={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},o={},t.d(o,r),o);var r,o;function n(e){if("object"==typeof GatherPress)return e.split(".").reduce(((e,t)=>e&&e[t]),GatherPress)}const{state:a}=(0,s.store)("gatherpress/rsvp",{actions:{rsvpOpenModal(){const e=document.querySelector(".gatherpress-rsvp-modal");e&&e.classList.add("gatherpress--is-visible")},rsvpCloseModal(){const e=document.querySelector(".gatherpress-rsvp-modal");e&&e.classList.remove("gatherpress--is-visible")},rsvpStatusAttending(){fetch(n("urls.eventApiUrl")+"/rsvp",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":n("misc.nonce")},body:JSON.stringify({post_id:n("eventDetails.postId"),status:"attending",guests:0,anonymous:0})}).then((e=>e.json())).then((e=>{e.success&&(a.activePostId=e.event_id,a.status=e.status)})).catch((()=>{}))}},callbacks:{renderRsvpBlock(){var e;const r=(0,s.getElement)(),o=(0,s.getContext)(),i=JSON.parse(r.ref.getAttribute("data-serialized-inner-blocks")),c=null!==(e=n("eventDetails.currentUser.status"))&&void 0!==e?e:"no_status";i&&i[c]?fetch(n("urls.eventApiUrl")+"/rsvp-render",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":n("misc.nonce")},body:JSON.stringify({status:a.status,post_id:o.postId,block_data:i[c]})}).then((e=>e.json())).then((e=>{e.success&&(r.ref.innerHTML=t.g.wp.dom.safeHTML(e.content),r.ref.querySelectorAll("[data-wp-interactive]").forEach((async e=>{t.g.wp.htmlEntities(e),console.log(e)})))})).catch((()=>{})):console.error("No inner blocks found for status:",c)}}});