import*as t from"@wordpress/interactivity";var e={d:(t,s)=>{for(var n in s)e.o(s,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:s[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const s=(n={getElement:()=>t.getElement,store:()=>t.store},r={},e.d(r,n),r);var n,r,o;function a(t){if("object"==typeof GatherPress)return t.split(".").reduce(((t,e)=>t&&t[e]),GatherPress)}const{state:l,actions:c}=(0,s.store)("gatherpress",{state:{rsvpStatus:null!==(o=a("eventDetails.currentUser.status"))&&void 0!==o?o:"no_status"},actions:{updateRsvp(){let t="not_attending";const e=(0,s.getElement)();["not_attending","no_status"].includes(l.rsvpStatus)&&(t="attending"),fetch(a("urls.eventApiUrl")+"/rsvp",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":a("misc.nonce")},body:JSON.stringify({post_id:a("eventDetails.postId"),status:t,guests:0,anonymous:0})}).then((t=>t.json())).then((t=>{console.log(t),console.log(e.ref),t.success&&(l.activePostId=t.event_id,l.rsvpResponseStatus=t.status,l.rsvpStatus=t.status,c.closeModal(null,e.ref),e.ref.focus())})).catch((()=>{}))}},callbacks:{renderRsvpBlock(){var t;const e=(0,s.getElement)(),n=null!==(t=l.rsvpStatus)&&void 0!==t?t:a("eventDetails.currentUser.status");e.ref.querySelectorAll("[data-rsvp-status]").forEach((t=>{const e=t.parentNode;t.getAttribute("data-rsvp-status")===n?(t.style.display="",e.insertBefore(t,e.firstChild)):t.style.display="none"}))}}});